<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Java Quiz (React)</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Javaコア技術 60問インタラクティブ試験</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body { font-family: "Microsoft YaHei", "SimHei", "STHeiti", sans-serif; margin: 20px; background: #f7f9fc; color: #333; line-height: 1.6; }
  /* body { font-family: "Hiragino Kaku Gothic Pro", "Meiryo", sans-serif; margin: 20px; background: #f7f9fc; color: #333; line-height: 1.6; } */
  h1 { text-align: center; color: #1a73e8; }
  .container { max-width: 960px; margin: 0 auto; }
  .filter-bar { text-align: center; margin: 20px 0; }
  .filter-btn { background: #fff; color: #1a73e8; border: 2px solid #1a73e8; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-size: 1em; margin: 0 5px; }
  .filter-btn.active { background: #1a73e8; color: white; }
  .filter-btn:hover { background: #e3f2fd; }
  .filter-btn.active:hover { background: #1557b0; }
  .question { background: white; border-radius: 12px; padding: 20px; margin: 20px 0; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
  .question.hidden { display: none; }
  .q-title { font-weight: bold; font-size: 1.15em; margin-bottom: 15px; color: #1a73e8; }
  .code { background: #f4f4f4; padding: 12px; border-radius: 6px; font-family: Consolas, monospace; margin: 10px 0; overflow-x: auto; }
  .options label { display: block; margin: 10px 0; cursor: pointer; }
  .options input { margin-right: 10px; }
  .show-btn { background: #1a73e8; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-size: 1em; }
  .show-btn:hover { background: #1557b0; }
  .answer { margin-top: 15px; padding: 15px; border-radius: 8px; display: none; }
  .answer.show { display: block; animation: fadeIn 0.5s; }
  .correct { background: #e8f5e9; border-left: 6px solid #4caf50; padding: 10px 15px; }
  .wrong { background: #ffebee; border-left: 6px solid #f44336; padding: 10px 15px; }
  .explanation { margin-top: 10px; background: #f5f5f5; padding: 12px; border-radius: 6px; }
  .multi { color: #d81b60; font-weight: bold; }
  @keyframes fadeIn { from {opacity:0;} to {opacity:1;} }
</style>
</head>
<body>
<div class="container">
  <h1>Javaコア技術 60問インタラクティブ試験（2025年版）</h1>
  <p style="text-align:center;color:#666;">クリック「答案を表示」→ 正誤判定＋正解＋詳細解説が出現</p>
  
  <div class="filter-bar">
    <button class="filter-btn active" onclick="filterQuestions('all')">すべて表示</button>
    <button class="filter-btn" onclick="filterQuestions('wrong')">間違えた問題のみ</button>
    <button class="filter-btn" onclick="filterQuestions('correct')">正解した問題のみ</button>
  </div>
  
  <div id="quiz-container">読み込み中...</div>
</div>

<script>
// 题目状态记录
const questionStatus = {};

const fileName = 'java-questions.json';

fetch(fileName)
  .then(res => res.json())
  .then(questions => renderQuiz(questions))
  .catch(err => document.getElementById('quiz-container').innerHTML = err);

function escapeHtml(text) {
  const div = document.createElement('div');
  div.textContent = text;
  return div.innerHTML;
}

function renderQuiz(questions) {
  const container = document.getElementById('quiz-container');
  container.innerHTML = questions.map((q, i) => `
    <div class="question" data-question="${i+1}">
      <div class="q-title">${q.isMulti ? '<span class="multi">【複数選択】</span>' : ''}${i+1}. ${escapeHtml(q.title)}</div>
      ${q.code ? `<div class="code">${escapeHtml(q.code)}</div>` : ''}
      <div class="options">
        ${q.options.map(opt => `
          <label><input type="${q.isMulti?'checkbox':'radio'}" name="q${i+1}" value="${opt.key}">
            ${opt.key}. ${escapeHtml(opt.text)}
          </label>`).join('')}
      </div>
      <button class="show-btn" onclick="checkAnswer(${i+1}, ${q.isMulti})">答案を表示</button>
      <div id="a${i+1}" class="answer"></div>
    </div>
  `).join('');
}

function checkAnswer(num, isMulti) {
  fetch(fileName).then(r=>r.json()).then(qs => {
    const q = qs[num-1];
    const div = document.getElementById('a'+num);
    let isOk = false;

    
    if (isMulti) {
      q.correct = Array.isArray(q.correct) ? q.correct : q.correct.split("");

      const selected = Array.from(document.querySelectorAll(`input[name="q${num}"]:checked`))
                        .map(c => c.value).sort();
      const correct = q.correct.sort();
      const correctStr = correct.join(', ');
      const selectedStr = selected.join(', ');
      isOk = JSON.stringify(selected) === JSON.stringify(correct);
      
      div.innerHTML = isOk 
        ? `<div class="correct">全正解！<br><strong>正解：${correctStr}</strong></div>`
        : `<div class="wrong">不正解<br><strong>正解：${correctStr}</strong><br>あなた選択：${selectedStr||'なし'}</div>`;
    } else {
      const selected = document.querySelector(`input[name="q${num}"]:checked`);
      if (!selected) { 
        div.innerHTML = `<div class="wrong">请选择后再点击！</div>`; 
        div.className="answer show"; 
        questionStatus[num] = 'wrong';
        return; 
      }
      isOk = selected.value === q.correct;
      div.innerHTML = isOk
        ? `<div class="correct">正解！<br><strong>正解：${q.correct}</strong></div>`
        : `<div class="wrong">不正解<br><strong>正解：${q.correct}</strong></div>`;
    }
    
    // 记录答题状态
    questionStatus[num] = isOk ? 'correct' : 'wrong';
    
    div.innerHTML += `<div class="explanation">${q.explanation}</div>`;
    div.className = "answer show";
  });
}

function filterQuestions(filter) {
  // 更新按钮状态
  document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
  event.target.classList.add('active');
  
  const questions = document.querySelectorAll('.question');
  questions.forEach(q => {
    const num = q.getAttribute('data-question');
    const status = questionStatus[num];
    
    if (filter === 'all') {
      q.classList.remove('hidden');
    } else if (filter === 'wrong') {
      q.classList.toggle('hidden', status !== 'wrong');
    } else if (filter === 'correct') {
      q.classList.toggle('hidden', status !== 'correct');
    }
  });
}
</script>
</body>
</html>
